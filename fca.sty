%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
% This is file `fca.sty' : LaTeX macros for Formal Concept Analysis           %
%                                                                             %
%      Copyright  Bernhard Ganter   5/03                                      %
%      Version of                   10/07                                     %
%                                                                             %
%  This program is provided under the terms of the                            %
%  LaTeX Project Public License distributed from CTAN                         %
%  archives in directory macros/latex/base/lppl.txt.                          %
%                                                                             %
%  This package contains two environments, called cxt and diagram,            %
%  for typesetting formal contexts and order diagrams,                        %
%  and a few macros for frequently used symbols in FCA.                       %
%                                                                             %
%  Short descriptions are given below. A recent version of this file          %
%  as well as a file named fcadoc.tex                                         %
%  should be available at   www.math.tu-dresden.de/~ganter                    %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
\NeedsTeXFormat{LaTeX2e}%                                                     %
\ProvidesPackage{fca}[2006/09/01 v2.1 Formal Concept Analysis macros]%        %
\RequirePackage{amssymb,xcolor,ifthen,rotating,xspace,colortbl}%%
\RequirePackage{tikz}[2.10]%
\usetikzlibrary{calc}%
%                                                                             %
%                                                                             %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%  environment cxt for making small cross-tables for Formal Concept Analysis  %
%                                                                             %
%  The environment is useful for typesetting  cross-tables                    %
%  of small formal contexts ( max. 20 attributes ).                           %
%                                                                             %
%  To typeset a formal context with attributes 1., 2., disqualified           %
%  and objects Alonso, Schumacher, Montoya, try                               %
%                                                                             %
%  \begin{cxt}%                                                               %
%  \cxtName{Formula 1}%                                                       %
%  \att{1.}%                                                                  %
%  \att{2.}%                                                                  %
%  \atr{disqualified}%                                                        %
%  \obj{x..}{Alonso}                                                          %
%  \obj{.x.}{Schumacher}                                                      %
%  \obj{.xx}{Montoya}                                                         %
%  \end{cxt}                                                                  %
%                                                                             %
%   Attribute definitions must precede object definitions !                   %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\newcommand{\cxt@Kreuz}{$\times$}%
\newcommand{\cxt@Punkt}{}%
\newcommand{\cxtArrowStyle}{\footnotesize}
\newcommand{\cxt@down}{\cxtArrowStyle$\Runterpfeil$}%
\newcommand{\cxt@up}{\cxtArrowStyle$\Hochpfeil$}%
\newcommand{\cxt@both}{\cxtArrowStyle$\Doppelpfeil$}%
\newcounter{cxt@mAnz}%
\newboolean{@ttributes}%
\newlength{\cxt@nameraise}%
\newlength{\@ttnameheight}%
%
\newcommand{\adjcxt@name}{%
\ifthenelse{\cxt@nameraise<\@ttnameheight}%
{\setlength{\cxt@nameraise}{\@ttnameheight}}{}}%
%
\newcommand{\cxtName}[1]{%
\def\cxtn@me{\multicolumn{1}{|c||}{\settoheight{\@ttnameheight}{#1}%
\addtolength{\cxt@nameraise}{-1.5\@ttnameheight}%
\raisebox{.5\cxt@nameraise}{#1}}}}%
%
\newcommand{\obj}[2]{\ifthenelse{\boolean{@ttributes}}%
{\setboolean{@ttributes}{false}\cxt@tabdef\cxtn@me&%
\cxt@tabtop\\\hline\hline}{}#2\cxt@Zeile{#1}\\\hline}%
%
\newcommand{\att}[1]{\ifthenelse{\boolean{@ttributes}}{%
\settoheight{\@ttnameheight}{#1}\adjcxt@name%
\ifcase\value{cxt@mAnz}%
\def\cxt@maName{#1}\def\cxt@tabtop{\cxt@maName}\or%
\def\cxt@mbName{\cxt@maName&#1}\def\cxt@tabtop{\cxt@mbName}\or%
\def\cxt@mcName{\cxt@mbName&#1}\def\cxt@tabtop{\cxt@mcName}\or%
\def\cxt@mdName{\cxt@mcName&#1}\def\cxt@tabtop{\cxt@mdName}\or%
\def\cxt@meName{\cxt@mdName&#1}\def\cxt@tabtop{\cxt@meName}\or%
\def\cxt@mfName{\cxt@meName&#1}\def\cxt@tabtop{\cxt@mfName}\or%
\def\cxt@mgName{\cxt@mfName&#1}\def\cxt@tabtop{\cxt@mgName}\or%
\def\cxt@mhName{\cxt@mgName&#1}\def\cxt@tabtop{\cxt@mhName}\or%
\def\cxt@miName{\cxt@mhName&#1}\def\cxt@tabtop{\cxt@miName}\or%
\def\cxt@mjName{\cxt@miName&#1}\def\cxt@tabtop{\cxt@mjName}\or%
\def\cxt@mkName{\cxt@mjName&#1}\def\cxt@tabtop{\cxt@mkName}\or%
\def\cxt@mlName{\cxt@mkName&#1}\def\cxt@tabtop{\cxt@mlName}\or%
\def\cxt@mmName{\cxt@mlName&#1}\def\cxt@tabtop{\cxt@mmName}\or%
\def\cxt@mnName{\cxt@mmName&#1}\def\cxt@tabtop{\cxt@mnName}\or%
\def\cxt@moName{\cxt@mnName&#1}\def\cxt@tabtop{\cxt@moName}\or%
\def\cxt@mpName{\cxt@moName&#1}\def\cxt@tabtop{\cxt@mpName}\or%
\def\cxt@mqName{\cxt@mpName&#1}\def\cxt@tabtop{\cxt@mqName}\or%
\def\cxt@mrName{\cxt@mqName&#1}\def\cxt@tabtop{\cxt@mrName}\or%
\def\cxt@msName{\cxt@mrName&#1}\def\cxt@tabtop{\cxt@msName}\or%
\def\cxt@mtName{\cxt@msName&#1}\def\cxt@tabtop{\cxt@mtName}\or%
\def\cxt@muName{\cxt@mtName&#1}\def\cxt@tabtop{\cxt@muName}\fi%
\stepcounter{cxt@mAnz}}%
{\PackageWarning{fca}{Attribute following object in cxt-environment%
has been ignored}{}}}%
\newcommand{\atr}[1]{\att{\begin{turn}{90}#1~~\end{turn}}}%
%
\def\cxt@tabdef{\begin{tabular}{|l||*{\value{cxt@mAnz}}{c|}}\hline}%
%
\def\cxt@aPunkt{&\phantom{\cxt@Kreuz}}%
\def\cxt@aKreuz{&\cxt@Kreuz}%
\def\cxt@aGrayKreuz{&\cellcolor[gray]{0.8}\cxt@Kreuz}%
\def\cxt@adown{&\rlap{\cxt@down}\phantom{\cxt@Kreuz}}%
\def\cxt@aup{&\rlap{\cxt@up}\phantom{\cxt@Kreuz}}%
\def\cxt@aboth{&\rlap{\cxt@both}\phantom{\cxt@Kreuz}}%
%
\def\cxt@stop{}%
\def\readcxt@zeile#1{\ifx#1\cxt@stop\let\next=\relax\else%
\ifx#1x\cxt@aKreuz%
\else\ifx#1X\cxt@aKreuz%
\else\ifx#1G\cxt@aGrayKreuz%
\else\ifx#1b\cxt@aboth%
\else\ifx#1u\cxt@aup%
\else\ifx#1d\cxt@adown%
\else\cxt@aPunkt\fi\fi\fi\fi\fi\fi%
\let\next=\readcxt@zeile\fi\next}%
\def\cxt@Zeile#1{\readcxt@zeile#1\cxt@stop}%
%
\newcommand{\Reset@cxtDefaults}{%
\setlength{\cxt@nameraise}{0pt}%
\setlength{\@ttnameheight}{0pt}%
\setcounter{cxt@mAnz}{0}%
\setboolean{@ttributes}{true}%
\newcommand{\cxtn@me}{}}%
%
\newenvironment{cxt}{\Reset@cxtDefaults}{\hline\end{tabular}}%
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                  end of cxt environment definition                          %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%       environment diagram for making diagrams of ordered sets and graphs    %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%       To obtain a diagram for the concept lattice of the formal context     %
%       above, try this:                                                      %
%                                                                             %
%{\unitlength 1.2mm                                                           %
%\begin{diagram}{40}{55}                                                      %
% \Node{1}{20}{10}                                                            %
% \Node{2}{35}{20}                                                            %
% \Node{3}{5}{30}                                                             %
% \Node{4}{35}{40}                                                            %
% \Node{5}{20}{50}                                                            %
% \Edge{1}{2}                                                                 %
% \Edge{1}{3}                                                                 %
% \Edge{2}{4}                                                                 %
% \Edge{3}{5}                                                                 %
% \Edge{4}{5}                                                                 %
% \leftAttbox{3}{2}{2}{1.}                                                    %
% \rightAttbox{2}{2}{2}{disqualified}                                         %
% \rightAttbox{4}{2}{2}{2.}                                                   %
% \leftObjbox{3}{2}{2}{Alonso}                                                %
% \rightObjbox{2}{2}{2}{Montoya}                                              %
% \rightObjbox{4}{2}{2}{Schumacher}                                           %
%\end{diagram}}                                                               %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%  The syntax of the commands is                                              %
%                                                                             %
%  \begin{diagram}{width}{height}                                             %
%                                                                             %
%  \Node{number}{xcoordinate}{ycoordinate} % (nodenumbers from 0 to 50)       %
%                                                                             %
%  \Edge{nodenumber1}{nodenumber2}                                            %
%                                                                             %
%  \leftAttbox{nodenumber}{xoffset}{yoffset}{text1 \\ text2 \\ ... }          %
%                                                                             %
%   similarly: \rightAttbox, \centerAttbox,                                   %
%              \leftObjbox,  \centerObjbox, \rightObjbox.                     %
%                                                                             %
%   \end{diagram}                                                             %
%                                                                             %
%  The circle size can be changed with the \CircleSize command.               %
%  The value must be a positive integer, which will be mutiplied              %
%  by \unitlength. The default is                                             %
%                                                                             %
%  \CircleSize{4}.                                                            %
%                                                                             %
%  A helpful command when fine tuning a diagram is                            %
%                                                                             %
%  \Numbers.                                                                  %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%     You may wish to permanently adjust the following values to your         %
%     personal preferences. They can also be changed inside each diagram      %
%     environment using \renewcommand.                                        %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\newcommand{\fca@Defaults}{%   Do not change this line!                     %
  \def\ObjectLabelStyle{\small\baselineskip6pt\rm}%                           %
  \def\AttributeLabelStyle{\small\baselineskip6pt\it}%                        %
  \setlength{\LabelBoxWidth}{9.68841em}%, originally 40mm = should be in      %
  % 9.6884107 em (12pt); ~10em          %
  \NoNumbers%                                                                 %
}%end-of-\fca@Defaults                                                      %
\tikzset{fca@basenodestyle/.style={shape=circle,inner sep=\fca@nodeinnersep,%
    line width=\fca@nodethickness,%          %
    font={\tiny},%                           %
    minimum size=\fca@CircleDiameter,%       %
    draw=none},%                             %
  fca@nodestyle/.style={fca@basenodestyle,draw,%                     %
    outer sep=0.5\pgflinewidth},%                %
  fca@edgestyle/.style={-, line width=\fca@edgethickness},%          %
  fca@baselabelopts/.style={pin distance=\fca@labeldistance,%        %
    pin edge=%                               %
    {densely dotted,thin,%                   %
      draw=\fca@drawpinedges,%                 %
      to path=%                                %
      {--(\tikztotarget\fca@pintoposition)%  %
        \tikztonodes}}%                    %
  },%                                       %
  fca@labelopts/.style={fca@baselabelopts,%                          %
    outer sep=0pt,inner sep=0pt,%                %
  },%                                           %
  FCALabelStyle/.style={fill=yellow!7,draw=gray,thin},%              %
  fca@Boxopts/.style={fca@baselabelopts,outer sep=0.5\pgflinewidth,% %
    FCALabelStyle}%                                %
}%end-of-tikzset                                                    %
\newlength{\LabelBoxWidth}%                                                 %
\newlength{\fca@labeldistance}%                                             %
\newlength{\fca@nodeinnersep}%                                              %
\newlength{\fca@edgethickness}%                                             %
\newlength{\fca@nodethickness}%                                             %
\newcommand{\diagramXoffset}{0}%                                            %
\newcommand{\diagramYoffset}{0}%                                            %
\newcommand{\NoDots}{\def\fca@drawpinedges{none}}%                          %
\newcommand{\WithDots}{\def\fca@drawpinedges{}}%                            %
\WithDots%                                                                  %
\def\fca@pintoposition{}%                                                   %
\setlength{\fca@edgethickness}{.8pt}%                                       %
\setlength{\fca@nodethickness}{1pt}%                                        %
\setlength{\fca@labeldistance}{0pt}%                                        %
\setlength{\fca@nodeinnersep}{0pt}%                                         %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                           %
% Changing the default values                                           %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\NodeThickness}[1]{\setlength{\fca@nodethickness}{#1}}%         %
% arg = a length                                                          %
\newcommand{\EdgeThickness}[1]{\setlength{\fca@edgethickness}{#1}}%         %
% arg=a length                                                            %
\def\fca@outputnumber{}% define an internal command to output the node names%
% (for \Numbers)                                     %
\newcommand{\Numbers}{\setlength{\fca@nodeinnersep}{2pt}%                   %
  \renewcommand{\fca@outputnumber}[1]{##1}}             %
\newcommand{\NoNumbers}{\setlength{\fca@nodeinnersep}{0pt}%                 %
  \renewcommand{\fca@outputnumber}[1]{}}%             %
\newcommand{\CircleSize}[1]{%                                               %
  \setlength{\fca@CircleDiameter}{#1\unitlength}}% arg                      %
% = diameter in unitlength %
\newcommand{\LabelDistance}[1]{%                                            %
  \setlength{\fca@labeldistance}{#1\unitlength}}% arg                       %
% = distance in unitlength  %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\newlength{\fca@CircleDiameter}%
\newcommand{\Node}[4][]{%
  \begin{pgfonlayer}{fca@nodelayer}%
    \node[fca@nodestyle,#1] (#2) at (#3,#4) {\fca@outputnumber{#2}};%
  \end{pgfonlayer}%
}%
%
\newcommand{\Edge}[3][]{%
  \begin{pgfonlayer}{fca@edgelayer}%
    \path (#2) edge[fca@edgestyle,#1] (#3);%
  \end{pgfonlayer}%
}%
%
\newcommand{\fca@generalLabelBox}[8]{%
  \begin{pgfonlayer}{fca@labellayer}%
    \path let
    \p{radiusvector} = ($ (#2.south) - (#2.north) $),%
    \n{radius} = {veclen(\x{radiusvector},\y{radiusvector})}%
    in
    node[fca@basenodestyle,%
    minimum size=\n{radius},%
    pin={[fca@labelopts,xshift={#4},yshift={#5},#1]#3:{%
        \begin{minipage}{\LabelBoxWidth}%
          #7#8#6%
        \end{minipage}%
      }}%
    ] at (#2){};%
  \end{pgfonlayer}%
}
%
\newcommand{\leftObjbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north east}%
  \fca@generalLabelBox{#1}{#2}{below left}%
  {-#3\unitlength}{-#4\unitlength}{#5}%
  {\raggedleft}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\rightObjbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north west}%
  \fca@generalLabelBox{#1}{#2}{below right}%
  {#3\unitlength}{-#4\unitlength}{#5}%
  {\raggedright}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\centerObjbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north}%
  \fca@generalLabelBox{#1}{#2}{below}%
  {0pt}{-#4\unitlength}{#5}%
  {\centering}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\leftAttbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south east}%
  \fca@generalLabelBox{#1}{#2}{above left}%
  {-#3\unitlength}{#4\unitlength}{#5}%
  {\raggedleft}{\AttributeLabelStyle}%
  \endgroup%
}%
\newcommand{\rightAttbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south west}%
  \fca@generalLabelBox{#1}{#2}{above right}%
  {#3\unitlength}{#4\unitlength}{#5}%
  {\raggedright}{\AttributeLabelStyle}%
  \endgroup%
}%
\newcommand{\centerAttbox}[5][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south}%
  \fca@generalLabelBox{#1}{#2}{above}%
  {0pt}{#4\unitlength}{#5}%
  {\centering}{\AttributeLabelStyle}%
  \endgroup%
}%
%
\newcommand{\fca@GeneralLabelBox}[6]{%
  \begin{pgfonlayer}{fca@labellayer}%
    \path let
    \p{radiusvector} = ($ (#2.south) - (#2.north) $),
    \n{radius} = {veclen(\x{radiusvector},\y{radiusvector})}
    in
    node[fca@basenodestyle,%
    minimum size=\n{radius},%
    pin={[fca@Boxopts,align=#5,font={#6},#1]#3:{#4}}%
    ] at (#2){};%
  \end{pgfonlayer}%
}
%
\newcommand{\leftObjBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north east}%
  \fca@GeneralLabelBox{#1}{#2}{below left}{#3}{right}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\rightObjBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north west}%
  \fca@GeneralLabelBox{#1}{#2}{below right}{#3}{left}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\centerObjBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.north}%
  \fca@GeneralLabelBox{#1}{#2}{below}{#3}{center}{\ObjectLabelStyle}%
  \endgroup%
}%
\newcommand{\leftAttBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south east}%
  \fca@GeneralLabelBox{#1}{#2}{above left}{#3}{right}{\AttributeLabelStyle}%
  \endgroup%
}%
\newcommand{\rightAttBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south west}%
  \fca@GeneralLabelBox{#1}{#2}{above right}{#3}{left}{\AttributeLabelStyle}%
  \endgroup%
}%
\newcommand{\centerAttBox}[3][]{%
  \begingroup%keep the following definition local
  \def\fca@pintoposition{.south}%
  \fca@GeneralLabelBox{#1}{#2}{above}{#3}{center}{\AttributeLabelStyle}%
  \endgroup%
}%
%
% DONE: the syntax {\color{red}\Edge...} does not work any more, but it is
% also superseded by the easier syntax \Edge[blue]
%
\def\fca@ResetDefaults{%
  \CircleSize{4}%
  \pgfsetlayers{bg,fca@nodelayer,fca@edgelayer,fca@labellayer,main}%
  \fca@Defaults%
}%end-of-\fca@ResetDefaults%
%
\pgfdeclarelayer{bg}
\pgfdeclarelayer{fca@nodelayer}
\pgfdeclarelayer{fca@edgelayer}
\pgfdeclarelayer{fca@labellayer}
\newenvironment{diagram}[3][]%  We have an optional argument for additional
% options for the tikzpicture
{\fca@ResetDefaults%
  \ifthenelse{\equal{#2}{}\or\equal{#3}{}}% if one arg=empty, then we do not
  {\def\fca@setboundingbox{}}%              fix a bounding box
  {\def\fca@setboundingbox{\useasboundingbox (0,0) rectangle (#2,#3);%
      \draw[red, thick] (0,0) rectangle (#2,#3);% %%TODO: remove this later
    }}%
  \noindent\begin{tikzpicture}[x=\unitlength,%
    y=\unitlength,%
    shift={(\diagramXoffset,\diagramYoffset)},#1]%
    \fca@setboundingbox%
    % NODO: Do we want to clip this as well? NO
    % For the moment this will be the size of the resulting graphic,
    % which may nevertheless protrude over the margins.
    % DONE: Do we want to provide a width and height at all? Tikz does not
    % enforce this, as it calculates the bounding box automatically.
    % ==> ONE could use the dimensions if both arguments are given, and if one
    % of the arguments is empty, then we could let tikz do its job.
    % DONE: One could also use layers to separate nodes, edges, labels and other
    % stuff. Is this desirable? It could cause unexpected behaviour if
    % people wish to draw over already drawn parts.
  }%end-of-\begin{diagram}
  {%
  \end{tikzpicture}%
}%end-of-\end{diagram}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%               End of diagram environment definition.                        %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                  Some simple macros for FCA-text.                           %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\providecommand{\GMI}{(G,M,\relI)}
\newcommand{\context}[1][K]{\ensuremath{\mathbb{#1}}}
\providecommand{\'}{\ensuremath{\sp\prime}}% derivation operator
\providecommand{\extent}[1]{\textrm{ext}(#1)}
\providecommand{\intent}[1]{\textrm{int}(#1)}
\providecommand{\extents}[1]{\textrm{Ext}(#1)}
\providecommand{\intents}[1]{\textrm{Int}(#1)}
\providecommand{\BV}{\underline{{\mathfrak B}}}
\providecommand{\CL}{\BV}
\providecommand{\BGMI}{{\mathfrak B} (G,M,\relI)}
\providecommand{\CGMI}{\BGMI}
\providecommand{\BVGMI}{\BV (G,M,\relI)}
\providecommand{\CLGMI}{\BVGMI}
\providecommand{\HNI}{(H,N,\relI \cap\; H{\times}N)}
\providecommand{\relI}{\mathrel{I}}
\providecommand{\notI}{\mathrel{\mbox{\rlap{\char'40}%
{\it I}\hspace*{-0.09em}\raisebox{.27ex}{\char'40}}}}%
%
\providecommand{\bigtimes}{\mathop{%
\mathchoice{\raisebox{-2pt}{\huge$\times$}}{\mbox{\LARGE$\times$}}%
{\raisebox{0pt}{\Large$\times$}}{\times}}\displaylimits}%
%
\providecommand{\Runterpfeil}{\mathrel{\swarrow}}
\providecommand{\DownArrow}{\Runterpfeil}
\providecommand{\Hochpfeil}{\mathrel{\nearrow}}
\providecommand{\UpArrow}{\Hochpfeil}
\providecommand{\IRunterpfeil}{\mathrel{\searrow}}
\providecommand{\IDownArrow}{\IRunterpfeil}
\providecommand{\IHochpfeil}{\mathrel{\nwarrow}}
\providecommand{\IUpArrow}{\IHochpfeil}
\providecommand{\Doppelpfeil}{\mathrel{\!\!\rlap{$\;\nearrow$}\swarrow}}
\providecommand{\DoubleArrow}{\Doppelpfeil}
%
\newcommand{\DDPfeil}{\mathrel{\mathchoice%
{\mbox{$\displaystyle\swarrow\hspace{-.7em}\swarrow$}}
{\mbox{$\textstyle\swarrow\hspace{-.7em}\swarrow$}}
{\mbox{$\scriptstyle\swarrow\hspace{-.5em}\swarrow$}}
{\mbox{$\scriptscriptstyle\swarrow\hspace{-.35em}\swarrow$}}}}
%
\newcommand{\NDDPfeil}{\mathrel{\mathchoice%
{\mbox{$\displaystyle\swarrow\hspace{-.7em}\swarrow%
\hspace{-1.2em}\backslash\hspace{.4em}$}}
{\mbox{$\textstyle\swarrow\hspace{-.7em}\swarrow
\hspace{-1.1em}\backslash\hspace{.4em}$}}
{\mbox{$\scriptstyle\swarrow\hspace{-.5em}\swarrow
\hspace{-.6em}\backslash\hspace{.2em}$}}
{\mbox{$\scriptscriptstyle\swarrow\hspace{-.35em}\swarrow
\hspace{-.5em}\backslash\hspace{.1em}$}}}}
%
\providecommand{\DPfeil}{\DDPfeil}
\providecommand{\NDPfeil}{\NDDPfeil}
\newcommand{\DDArrow}{\DDPfeil}
\newcommand{\NDDArrow}{\NDDPfeil}
\providecommand{\Semi}{\mathrel{\mbox{\tiny\rlap{\raisebox{2.0ex}%
{$\bigtriangledown$}}\raisebox{-0.0ex}{$\bigtriangleup$}}}}
\def\ovee{\mbox{\small$\mathrel{\hspace{.35em}\raisebox{-1pt}%
{$\smash{\vee}$}\hspace*{-.835em}\bigcirc\hspace{.2em}}$}}
\def\owedge{\mbox{\small$\mathrel{\hspace{.35em}\smash{\wedge}%
\hspace*{-.835em}\bigcirc\hspace{.2em}}$}}
%
\providecommand{\ptimes}[1]{\mathrel{\stackrel{#1}{\times}}}
%
\providecommand{\FCA}{Formal Concept Analysis\xspace}
\providecommand{\FBA}{Formale Begriffsanalyse\xspace}
\providecommand{\FnBA}{Formalen Begriffsanalyse\xspace}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                             %
%                End of fca.sty style file definitions                        %
%                                                                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
